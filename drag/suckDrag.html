<div id="divBox">?</div>
<div id="dragCircle">Drag me</div>
<style>
  * {
    margin: 0;
    padding: 0;
  }

  #divBox {
    margin: 100px 200px;
    width: 90px;
    height: 90px;
    border: 5px dashed #ddd;
    /* border-radius: 50%; */
    background: #f3f3f3;
    margin-right: 100px;
    text-align: center;
    line-height: 90px;
  }

  #dragCircle {
    width: 100px;
    height: 100px;
    /* border-radius: 50%; */
    background: #e0543e;
    position: absolute;
    left: 0;
    top: 0;
    text-align: center;
    line-height: 100px;
  }
</style>

<script>
  var oBox = document.getElementById("divBox");
  var dragCircle = document.getElementById("dragCircle");

  var boxWrap = {
    top: oBox.offsetTop,
    right: oBox.offsetLeft + oBox.offsetWidth,
    bottom: oBox.offsetTop + oBox.offsetHeight,
    left: oBox.offsetLeft
  };
  var n = 30; // 吸附阀值
  dragCircle.onmousedown = function(ev) {
    var ev = ev || event;
    var disX = ev.clientX - this.offsetLeft;
    var disY = ev.clientY - this.offsetTop;
    if (dragCircle.setCapture) {
      dragCircle.setCapture();
    }
    document.onmousemove = function(ev) {
      var ev = ev || event;
      var L = ev.clientX - disX;
      var T = ev.clientY - disY;
      var R = L + dragCircle.offsetWidth;
      var B = T + dragCircle.offsetHeight;

      if (
        R > boxWrap.left - n &&
        B > boxWrap.top - n &&
        T < boxWrap.bottom + n &&
        L < boxWrap.right + n
      ) {
        L = boxWrap.left;
        T = boxWrap.top;
      }

      dragCircle.style.left = L + "px";
      dragCircle.style.top = T + "px";
    };
    document.onmouseup = function() {
      document.onmousemove = null;
    };
    return false;
  };
</script>
